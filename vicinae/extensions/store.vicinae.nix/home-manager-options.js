"use strict";var M=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var U=(e,a)=>{for(var s in a)M(e,s,{get:a[s],enumerable:!0})},H=(e,a,s,i)=>{if(a&&typeof a=="object"||typeof a=="function")for(let c of F(a))!A.call(e,c)&&c!==s&&M(e,c,{get:()=>a[c],enumerable:!(i=v(a,c))||i.enumerable});return e};var z=e=>H(M({},"__esModule",{value:!0}),e);var R={};U(R,{default:()=>N});module.exports=z(R);var $=require("@vicinae/api");var b=require("@vicinae/api"),S=(0,b.getPreferenceValues)(),q={"User-Agent":"Mozilla/5.0 (X11; Linux x86_64; rv:138.0) Gecko/20100101 Firefox/138.0",Origin:"https://search.nixos.org/",Accept:"application/json","Content-Type":"application/json",Authorization:`Basic ${S.authToken}`};function k(e){return e?e.replace(/<[^>]*>/g,"").replace(/^\n+/,"").replace(/\n+$/,"").trim():""}async function P(e){let a=S.homeManagerOptionsUrl,s={"User-Agent":"Mozilla/5.0 (X11; Linux x86_64; rv:144.0) Gecko/20100101 Firefox/144.0",Accept:"*/*","Accept-Language":"en-US,en;q=0.5","Accept-Encoding":"gzip, deflate, br, zstd",Referer:"https://home-manager-options.extranix.com/?query=&release=master","Sec-GPC":"1",Connection:"keep-alive","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",TE:"trailers"};try{let i=await fetch(a,{method:"GET",headers:s});if(!i.ok)throw new Error(`Home-Manager options request failed: ${i.status}`);let m=(await i.json()).options.filter(t=>typeof t.title=="string"&&t.title.toLowerCase().includes(e.toLowerCase())||typeof t.description=="string"&&t.description.toLowerCase().includes(e.toLowerCase())).sort((t,n)=>{let d=typeof t.title=="string"&&t.title.toLowerCase().includes(e.toLowerCase()),p=typeof n.title=="string"&&n.title.toLowerCase().includes(e.toLowerCase());if(d&&!p)return-1;if(!d&&p)return 1;let f=typeof t.title=="string"?t.title:"",T=typeof n.title=="string"?n.title:"";return f.localeCompare(T)});return m.map((t,n)=>({name:typeof t.title=="string"?t.title:"",description:k(typeof t.description=="string"?t.description:""),type:typeof t.type=="string"?t.type:"",default:typeof t.default=="string"?t.default:void 0,example:typeof t.example=="string"?k(t.example):void 0,sourceUrl:t.declarations&&Array.isArray(t.declarations)&&t.declarations.length>0&&t.declarations[0]?.url?t.declarations[0].url:void 0,score:m.length-n}))}catch(i){throw console.error("Failed to search Home-Manager options:",i),i}}var r=require("@vicinae/api");var O=require("@vicinae/api"),g=require("@vicinae/api");async function y(e,a){try{await O.Clipboard.copy(e),(0,g.showToast)({style:g.Toast.Style.Success,title:"Copied",message:`${a} copied to clipboard`})}catch{(0,g.showToast)({style:g.Toast.Style.Failure,title:"Copy failed",message:`Failed to copy ${a.toLowerCase()}`})}}var o=require("react/jsx-runtime");function E({name:e,description:a,defaultValue:s,sourceUrl:i}){return(0,o.jsxs)(r.ActionPanel,{children:[i&&(0,o.jsx)(r.Action.OpenInBrowser,{title:"View Source Code",icon:r.Icon.Code,url:i,shortcut:{modifiers:["ctrl"],key:"s"}}),(0,o.jsx)(r.Action,{title:"Copy Option Name",icon:r.Icon.Clipboard,onAction:async()=>await y(e,"Option name"),shortcut:{modifiers:["ctrl"],key:"n"}}),(0,o.jsx)(r.Action,{title:"Copy Description",icon:r.Icon.Clipboard,onAction:async()=>await y(a,"Description"),shortcut:{modifiers:["ctrl"],key:"d"}}),s&&(0,o.jsx)(r.Action,{title:"Copy Default Value",icon:r.Icon.Clipboard,onAction:async()=>await y(s,"Default value"),shortcut:{modifiers:["ctrl"],key:"v"}})]})}function C({option:e}){return(0,o.jsx)(r.List.Item,{title:e.name,detail:(0,o.jsx)(r.List.Item.Detail,{markdown:`# ${e.name}

${k(e.description)}${e.example?`

**Example:**
\`\`\`
${k(e.example)}
\`\`\``:""}`,metadata:(()=>{let a=[],s=0;return e.type&&e.type.trim()&&(a.push((0,o.jsx)(r.List.Item.Detail.Metadata.Label,{title:"Type",text:e.type},"type")),s++),e.default&&e.default.trim()&&(s>0&&a.push((0,o.jsx)(r.List.Item.Detail.Metadata.Separator,{},`sep-${s}`)),a.push((0,o.jsx)(r.List.Item.Detail.Metadata.Label,{title:"Default",text:e.default},"default")),s++),(0,o.jsx)(r.List.Item.Detail.Metadata,{children:a})})()}),actions:(0,o.jsx)(E,{name:e.name,description:e.description,defaultValue:e.default,sourceUrl:e.sourceUrl})},e.name)}var I=require("@vicinae/api");var l=require("react"),x=require("@vicinae/api");function L(e,a="Search failed"){let[s,i]=(0,l.useState)([]),[c,_]=(0,l.useState)(!1),[m,u]=(0,l.useState)(""),t=(0,l.useRef)(null),n=(0,l.useCallback)(async p=>{if(!p.trim()){i([]);return}_(!0);try{let f=await e(p);i(f)}catch(f){console.error("Search failed:",f),(0,x.showToast)({style:x.Toast.Style.Failure,title:"Search failed",message:a}),i([])}finally{_(!1)}},[e,a]),d=(0,l.useCallback)(p=>{u(p),t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{n(p),t.current=null},500)},[n]);return{items:s,isLoading:c,searchText:m,handleSearchTextChange:d}}var h=require("react/jsx-runtime");function w({searchFunction:e,errorMessage:a,placeholder:s,emptyIcon:i,emptyTitle:c,emptyDescription:_,renderItems:m}){let{items:u,isLoading:t,searchText:n,handleSearchTextChange:d}=L(e,a);return(0,h.jsxs)(I.List,{isLoading:t,onSearchTextChange:d,searchBarPlaceholder:s,isShowingDetail:!0,children:[m(u),!t&&n&&u.length===0&&(0,h.jsx)(I.List.EmptyView,{icon:i,title:`No results found for "${n}"`,description:"Try a different search term"}),!t&&!n&&(0,h.jsx)(I.List.EmptyView,{icon:i,title:c,description:_})]})}var D=require("react/jsx-runtime");function N(){return(0,D.jsx)(w,{searchFunction:P,errorMessage:"Failed to search Home-Manager options. Please try again.",placeholder:"Search Home-Manager options...",emptyIcon:$.Icon.Gear,emptyTitle:"Search Home-Manager Options",emptyDescription:"Type in the search bar to find Home-Manager options",renderItems:e=>e.map(a=>(0,D.jsx)(C,{option:a},a.name))})}
